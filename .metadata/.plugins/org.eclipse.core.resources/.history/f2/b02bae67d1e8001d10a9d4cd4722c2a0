<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>View Users</title>
	<style th:replace="includes/style :: style"></style>
	<link href="style/viewAgentStyle.css" rel="stylesheet" />
</head>

<body class="backgroundColor">
	<header th:replace="includes/header :: header"></header>
	<div class="container">
		<div class="row text-center">
			<div class="col-sm-12 col-md-12">
				<a href="/home" class="btn btn-info text-white float-end">Go Back</a>
			</div>
			<div class="col-sm-12 col-md-12">
				<form th:action="@{/viewAgentList}" method="post" class="singleInputButtonForm">
					<h3 class="text-center heading" id="hehe">View Agent Form</h3>
					<div class="switchDiv">
						<label class="label" for="display-toggle">Customer ID &nbsp;</label>
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="display-toggle">
						</div>
						<label class="label" for="display-toggle">Customer Name</label>
					</div>
					<input type="text" id="customerId" name="customerId" placeholder="Customer Id"
						class=".ui-box .top-leftStart-backward" required />
					<input type="text" id="name" name="name" placeholder="Customer Name"
						class=".ui-box .top-leftStart-backward" required />
					<input type="submit" class="submitBtn" value="Submit" />
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-12 col-md-12 mt-4" th:if="${agentList != null}">
				<h3 class="heading text-center">Agent List</h3>
				<h6><b>Customer ID: </b><span th:text="${agentList[0].customerId}"></span></h6>
				<h6><b>Name: </b><span th:text="${agentList[0].name}"></span></h6>
				<div class="text-center">
					<div class="table-responsive" id="table">
						<table class="table table-editable">
							<thead class="thead">
								<tr class="table-success">
									<th>Account Code</th>
									<th>Account Type</th>
									<th>Ledger Balance</th>
									<th>Collection Amount</th>
									<th>Save Collection</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="agent : ${agentList}">
									<form method="post" th:action="@{/saveCollection}"
										th:object="${agentCollectionList}" id="collectionForm">
										<input type="hidden" name="customerId" th:value="${agent.customerId}" />
										<td th:text="${agent.accountCode}"></td>
										<input type="hidden" name="accountCode" th:value="${agent.accountCode}" />
										<td th:text="${agent.accountType}"></td>
										<input type="hidden" name="accountType" th:value="${agent.accountType}" />
										<input type="hidden" name="name" th:value="${agent.name}" />
										<td th:text="${agent.ledgerbalance}"></td>
										<input type="hidden" name="ledgerbalance" th:value="${agent.ledgerbalance}" />
										<td><input type="number" id="collectionAmount" name="collectionAmount"
												min="0" /></td>
										<input type="hidden" id="latitude" name="latitude" />
										<input type="hidden" id="longitude" name="longitude" />
										<td><input type="submit" id="saveBtn" class="btn btn-warning" value="Save" />
										</td>
									</form>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script th:replace="includes/script :: script"></script>
	<script th:if="${isDataMissing != null}" th:inline="javascript">
		alert("No data available!");
	</script>
	<script th:if="${isCollectionSaved != null}" th:inline="javascript">
		//alert(th:text = "${isCollectionSaved}");
		alert([[${#strings.escapeJavaScript(isCollectionSaved)}]]);
	</script>
	<script src="script/location.js"></script>
	<script src="script/location.js"></script>


	<!--<footer th:replace="includes/footer :: footer"></footer>-->
</body>

</html>