package com.idsspl.webproject.serviceImpl;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Base64;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.idsspl.webproject.entity.CustomerEntity;
import com.idsspl.webproject.model.CustomerModel;
import com.idsspl.webproject.repo.CustomerRepo;
import com.idsspl.webproject.service.CustomerService;

@Service
public class CustomerServiceImpl implements CustomerService {

	@Autowired
	private CustomerRepo customerRepo;

	@Override
	public List<CustomerModel> getCustomerList(CustomerModel customer) {

		List<CustomerEntity> customerEntityList = customerRepo.findByCustomerId(customer.getCustomerId());
		List<CustomerModel> customerModelList = new ArrayList<>();

		customerEntityList.stream().forEach(customerEntity -> {
			CustomerModel customerModel = new CustomerModel();
			customerModel.setCustomerId(customerEntity.getCustomerId());
			customerModel.setName(customerEntity.getName());
			customerModel.setAddress(customerEntity.getAddress());
			customerModel.setMobileNo(customerEntity.getMobileNo());
			customerModel.setDateofbirth(customerEntity.getDateofbirth());
			customerModel.setAadharcardNo(customerEntity.getAadharcardNo());
			try {
				customerModel.setSignature(
						customerEntity.getSignature().getBytes(1, (int) customerEntity.getSignature().length()));
				System.out.println("hqhqhqhqhqhqhqhq------"
						+ customerEntity.getSignature().getBytes(1, (int) customerEntity.getSignature().length()));
			} catch (SQLException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			System.out.println("NAME------" + customerEntity.getName());
			customerModelList.add(customerModel);
		});

		return customerModelList;
	}

}
